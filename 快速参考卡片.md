# 🚀 游戏集成快速参考卡片

## 🔥 5步集成法

1. **创建目录** `games/[游戏名]/`
2. **实现游戏类** 继承标准接口
3. **设计认知分析** 五大领域框架
4. **创建游戏页面** 使用标准模板
5. **更新主页** 添加游戏卡片

## 🔴 必须实现的核心方法

```javascript
class YourGame {
    // 🔴 监听训练系统
    initializeGame() {
        window.addEventListener('trainingSystemEvent', (event) => {
            this.handleTrainingEvent(event.detail);
        });
    }

    // 🔴 处理训练事件
    handleTrainingEvent(eventDetail) {
        switch (eventDetail.event) {
            case 'training_start': this.startFirstRound(); break;
            case 'training_pause': this.pauseGame(); break;
            case 'training_resume': this.resumeGame(); break;
            case 'training_end': this.endAllRounds(); break;
        }
    }

    // 🔴 报告数据
    reportToTrainingSystem() {
        if (window.TrainingAPI) {
            TrainingAPI.reportGameData({
                gameType: 'your_game',
                roundData: this.gameData.currentRoundData,
                cognitiveMetrics: this.calculateCognitiveMetrics()
            });
        }
    }

    // 🔴 认知分析
    calculateCognitiveMetrics() {
        return {
            executiveFunction: { /* 执行功能 */ },
            attention: { /* 注意力 */ },
            learningMemory: { /* 学习记忆 */ },
            processingSpeed: { /* 处理速度 */ },
            spatialCognition: { /* 空间认知 */ }
        };
    }
}
```

## 📊 数据结构模板

```javascript
// 轮次数据
this.gameData.currentRoundData = {
    roundNumber: 1,
    startTime: Date.now(),
    endTime: null,
    duration: 0,
    score: 0,
    events: [],
    // 游戏特定数据...
};

// 事件记录
this.recordEvent('event_type', { key: 'value' });

// 游戏报告
const report = {
    gameType: 'game_name',
    currentRound: 1,
    roundData: { /* 轮次数据 */ },
    totalStats: { /* 总体统计 */ },
    cognitiveMetrics: { /* 认知指标 */ }
};
```

## 🎯 认知领域对应表

| 游戏类型 | 主要认知领域 | 关键指标 |
|---------|-------------|----------|
| **反应类** | 处理速度、注意力 | 反应时间、准确性 |
| **策略类** | 执行功能、学习 | 规划能力、决策质量 |
| **记忆类** | 学习记忆、注意力 | 记忆广度、保持率 |
| **空间类** | 空间认知、执行功能 | 空间记忆、导航 |

## 🏗️ 文件结构

```
games/[游戏名]/
├── game.html          # 游戏界面组件
├── game.css           # 游戏专用样式
└── game.js            # 游戏逻辑系统

[游戏名]-game.html      # 完整游戏页面
```

## ⚠️ 常见问题速查

**按键滚动页面？**
```javascript
if (['ArrowUp', 'ArrowDown'].includes(event.key)) {
    event.preventDefault(); // 阻止默认行为
}
```

**游戏卡顿？**
```javascript
// 只记录关键事件，避免高频记录
recordEvent(type, data = {}) {
    if (this.isHighFrequencyEvent(type)) return;
    // 记录逻辑...
}
```

**认知指标异常？**
```javascript
// 添加数据验证
const validation = this.validateMetrics(metrics);
if (!validation.isValid) {
    console.warn('指标异常:', validation.errors);
}
```

## ✅ 上线检查清单

- [ ] 四个核心方法已实现
- [ ] 训练系统事件响应正常
- [ ] 数据记录格式正确
- [ ] 认知指标计算合理
- [ ] 界面适配良好
- [ ] 性能流畅(>30fps)
- [ ] JSON输出正确
- [ ] 主页已更新

## 🎮 参考实现

- **完整示例**: `games/snake/` - Snake游戏
- **系统API**: `game-template/template.js`
- **详细指南**: `游戏集成指南.md`
- **实操手册**: `实操手册.md`

---

**💡 提示**: 复制Snake游戏目录作为模板，修改核心逻辑即可快速上手！

**⏱️ 预期时间**: 熟练后20分钟完成一个游戏集成