# 信息采样任务 - 数据保存机制

## 概述

这是一个基于jsPsych框架的认知实验，使用"jspsych"模板，用于评估用户在决策过程中的信息收集行为和风险倾向。

## 实验内容

信息采样任务包含两种条件：
- **递减获胜（Decreasing Win）**：从250分开始，每打开一个卡片扣除10分，正确选择获得剩余分数，错误选择扣除100分
- **固定获胜（Fixed Win）**：从0分开始，正确选择获得100分，错误选择扣除100分

## 数据保存机制

### 保存流程

1. **服务器端保存（首选）**：
   - 实验结束时，jsPsych自动将数据通过AJAX POST请求发送到 `/save` 端点
   - 数据格式为JSON序列化的jsPsych数据对象
   - 成功后跳转到 `/next` 页面

2. **本地保存（备用）**：
   - 如果服务器端点不可用或返回错误，系统自动使用jsPsych的本地保存功能
   - 调用 `jsPsych.data.localSave()` 方法生成CSV文件：`information-sampling-task_results.csv`
   - 文件自动下载到用户的默认下载目录

### 数据格式

#### 服务器端保存
- **格式**：JSON字符串
- **内容**：jsPsych标准数据格式，包含每个试次的详细信息

#### 本地保存
- **格式**：CSV文件
- **内容**：包含以下关键字段
  - `trial_type`：试次类型
  - `trial_id`：试次标识符
  - `exp_stage`：实验阶段（practice/Fixed Win/Decreasing Win）
  - `rt`：反应时间
  - `response`：用户响应
  - `correct_response`：正确答案
  - `color_clicked`：点击的颜色
  - `which_click_in_round`：该轮中的点击次数
  - `reward`：获得的奖励分数
  - `trial_num`：试次编号

### 认知评估维度

实验测量的认知能力包括：
- 信息收集策略
- 风险决策倾向
- 认知灵活性
- 执行功能
- 学习与记忆能力

### 技术实现

- **框架**：jsPsych 心理学实验框架
- **插件**：使用多种jsPsych插件和Poldrack定制插件
- **依赖库**：jQuery、Math.js
- **数据处理**：jsPsych内置数据管理系统

### 实验流程

1. 指导说明阶段
2. 练习阶段
3. 正式测试（两种条件随机顺序）
4. 实验后问卷
5. 自动数据保存

## 使用说明

1. 实验自动运行，无需手动保存设置
2. 数据在实验结束时自动保存
3. 如出现下载提示，说明启用了本地保存模式
4. CSV文件包含完整的试次级数据，可用于进一步分析

## 注意事项

- 确保浏览器允许自动下载文件
- CSV文件包含详细的认知任务表现数据
- 数据格式符合jsPsych标准，便于后续统计分析
- 实验时长约12分钟