# Is-it-Equal-Zen 数据保存机制

## 游戏概述
算式相等判断任务（禅意模式）- 用户需要判断呈现的算式是否正确的认知评估游戏。

## 数据保存方式

### 保存触发条件
- 每完成一个试次后自动保存数据
- 游戏完成时（完成24个试次且最后一次答对）进行最终数据输出

### 保存机制
1. **服务器保存**（主要方式）：
   - POST请求到 `/save` 端点
   - 如果成功，跳转到 `/next` 页面

2. **本地下载**（备用方式）：
   - 当服务器端点不可用时自动启用
   - 生成JSON文件：`is-it-equal-zen_result.json`
   - 用户可点击下载按钮保存到本地

## 数据结构

每个试次记录以下数据：

| 字段 | 类型 | 描述 |
|------|------|------|
| `trial` | Number | 试次编号 |
| `answer` | Number | 用户回答：0=相等，1=不相等 |
| `problem` | String | 算式字符串（如"5 + 3 = 8"） |
| `RT` | Number | 反应时间（秒） |
| `n1` | Number | 第一个操作数 |
| `n2` | Number | 第二个操作数 |
| `points` | Number | 当前得分 |
| `problem_id` | String | 问题标识符 |
| `solution` | Number | 正确答案（n1 + n2） |
| `ACC` | Number | 准确性：1=正确，0=错误 |
| `finished` | Number | 是否完成：1=游戏结束，0=继续 |

## 数据输出格式

```json
[
  {
    "trial": 1,
    "answer": 0,
    "problem": "5 + 3 = 8",
    "RT": 1.234,
    "n1": 5,
    "n2": 3,
    "points": 1,
    "problem_id": "A1",
    "solution": 8,
    "ACC": 1,
    "finished": 0
  },
  // ... 更多试次数据
]
```

## 评分机制
- 正确回答：+1分
- 错误回答：-1分（最低0分）
- 连续正确奖励：3次、7次、15次、24次连对额外+1分

## 文件位置
- 主要逻辑：`index.html`（第29-81行）
- 数据收集：`js/Run.js`（第223-251行）
- 问题生成：`js/problems.js`

## 使用说明
游戏会自动处理数据保存，无需用户手动操作。如果在本地环境运行，数据将自动下载为JSON文件供后续分析使用。