# Go-NoGo反应抑制任务 - 数据保存机制

## 概述
Go-NoGo反应抑制任务是一个经典的认知心理学实验，用于测量执行控制和反应抑制能力。该任务由Donders在1868年首次提出概念，后经多位研究者发展完善，成为评估认知控制、冲动控制和注意调节能力的标准化工具。参与者需要对"Go"刺激做出快速反应，同时抑制对"NoGo"刺激的反应，为研究执行功能、ADHD诊断和神经调节机制提供重要数据。

## 数据保存机制

### 保存位置和方式
- **主要方式**: AJAX POST请求到服务器端点 `/save`
- **备用方式**: 当服务器不可用时，自动下载CSV文件到本地
- **文件格式**: JSON格式（服务器）或CSV格式（本地）
- **文件名**: `go-nogo_results.csv`

### 数据保存流程
1. 使用jsPsych框架管理整个实验流程和数据收集
2. 每个试次完成后自动记录反应时间、按键响应、正确性等数据
3. 实验结束时序列化所有数据为JSON格式
4. 优先通过AJAX POST发送到服务器
5. 服务器不可用时触发本地CSV文件下载

### jsPsych数据结构
```javascript
{
  "rt": 456,                              // 反应时间(毫秒)
  "stimulus": "<div class = centerbox><div id = stim1></div></div>", // 呈现的刺激
  "key_press": 32,                        // 按键响应(32=空格键, -1=无反应)
  "correct": true,                        // 反应正确性
  "trial_type": "poldrack-single-stim",   // 试次类型
  "trial_index": 45,                      // 试次索引
  "time_elapsed": 8950,                   // 实验开始以来的总时间
  "internal_node_id": "0.0.3.2",         // jsPsych内部节点ID
  "trial_id": "stim",                     // 自定义试次标识
  "exp_stage": "test",                    // 实验阶段(practice/test)
  "condition": "go",                      // 条件类型(go/nogo)
  "correct_response": 32,                 // 正确反应键值
  "trial_num": 45,                        // 试次编号
  "possible_responses": [32],             // 可能的反应按键
  "timing_stim": 750,                     // 刺激呈现时间
  "timing_response": 1250,                // 反应窗口时间
  "credit_var": true                      // 任务完成质量评估
}
```

## 实验设计与刺激

### 刺激类型 (`experiment.js:104-145`):
**Go条件（需要反应）**:
- **橙色方块** 或 **蓝色方块**（随机分配）
- **正确反应**: 尽快按空格键(键值32)
- **特点**: 需要快速执行反应，测量反应速度

**NoGo条件（需要抑制）**:
- **蓝色方块** 或 **橙色方块**（与Go条件相反）
- **正确反应**: 不做任何反应（键值-1）
- **特点**: 需要抑制优势反应，测量认知控制

### 实验结构:
1. **指导阶段**: 详细说明任务要求和反应规则
2. **练习阶段**: 10个试次（5个Go + 5个NoGo），每次反应后给予反馈
3. **正式测试**: 350个试次（315个Go + 35个NoGo，比例9:1），无反馈
4. **后测问卷**: 收集主观体验和策略报告

### 试次时间流程:
- 刺激呈现: 750ms
- 反应窗口: 1000-1500ms（随机）
- 试次间间隔: 自适应调整

## 数据保存实现代码

**实验初始化和数据收集** (`index.html:31-37`):
```javascript
jsPsych.init({
    timeline: go_nogo_experiment,
    display_element: "getDisplayElement",
    fullscreen: true,
    on_trial_finish: function(data){
        addID('go-nogo')  // 添加实验标识符
    }
})
```

**实验结束数据保存** (`index.html:39-69`):
```javascript
on_finish: function(data){
    // 序列化数据
    var promise = new Promise(function(resolve, reject) {
        var data = jsPsych.data.dataAsJSON();
        resolve(data);
    })
    
    promise.then(function(data) {
        $.ajax({
            type: "POST",
            url: '/save',
            data: { "data": data },
            success: function(){ document.location = "/next" },
            dataType: "application/json",
            
            // 端点不可用，本地保存
            error: function(err) {
                if (err.status == 200){
                    document.location = "/next";
                } else {
                    // 如果错误，假设本地保存
                    jsPsych.data.localSave('go-nogo_results.csv', 'csv');
                }
            }
        });
    })
}
```

**试次数据记录** (`experiment.js:59-69`):
```javascript
var appendData = function(data) {
  var correct = false
  if (data.key_press == data.correct_response) {
    correct = true
  }
  jsPsych.data.addDataToLastTrial({
    trial_num: current_trial,
    correct: correct
  })
  current_trial = current_trial + 1
}
```

## 核心认知测量

### 1. 反应抑制能力
- **定义**: 抑制优势反应的能力
- **测量**: NoGo试次的虚报率（假阳性率）
- **计算**: (NoGo错误反应次数 / NoGo总试次) × 100%
- **意义**: 越低表示抑制控制能力越好

### 2. 反应执行能力  
- **定义**: 快速准确执行反应的能力
- **测量**: Go试次的平均反应时间和正确率
- **计算**: Go试次的RT均值和准确率
- **意义**: RT越短且准确率越高表示执行效率越好

### 3. 反应偏向性
- **定义**: 总体反应倾向的测量
- **测量**: 整体反应率和反应模式
- **计算**: 总反应次数 / 总试次数
- **意义**: 反映冲动性和保守性的平衡

### 4. 信号检测论指标
- **敏感性(d')**: 区分Go和NoGo刺激的能力
- **反应偏向(c)**: 反应阈值的保守性程度
- **计算**: 基于命中率和虚报率的信号检测分析

## 认知神经科学基础

### 1. 神经网络
- **右侧下额叶皮层(rIFG)**: 反应抑制的关键区域
- **前扣带皮层(ACC)**: 冲突监测和认知控制
- **纹状体**: 动机和反应选择的调节
- **前运动皮层**: 运动准备和执行的控制

### 2. 电生理指标
- **N2成分**: 反映冲突检测和抑制过程(200-300ms)
- **P3成分**: 反映注意资源分配和决策过程(300-500ms)
- **错误相关负波(ERN)**: 错误监测的神经标记
- **停止信号相关电位**: 特异性抑制过程的标记

### 3. 发展变化
- **儿童期**: 抑制控制能力逐步发展，虚报率较高
- **青少年期**: 冲动控制仍在成熟，风险决策增加
- **成年期**: 抑制能力达到最优水平
- **老年期**: 抑制效率下降，反应时间延长

## 临床应用价值

### 1. ADHD评估
- **注意缺陷**: Go试次反应时间变异性增大
- **多动冲动**: NoGo试次虚报率显著升高
- **药物效果**: 兴奋剂治疗可改善抑制控制表现
- **诊断辅助**: 结合其他测试进行综合评估

### 2. 其他临床应用
- **物质依赖**: 抑制控制缺陷与成瘾行为相关
- **强迫症**: 抑制功能异常与强迫行为关联
- **精神分裂症**: 执行功能缺陷的重要指标
- **创伤后应激障碍**: 情绪调节和抑制控制受损

### 3. 康复训练
- **认知训练**: 改善执行控制和注意调节
- **神经反馈**: 基于脑电信号的实时训练
- **行为干预**: 结合行为疗法提高自控力
- **药物治疗**: 监测药物对认知功能的影响

## 数据质量控制

### 性能评估函数 (`experiment.js:19-51`):
```javascript
function assessPerformance() {
    var experiment_data = jsPsych.data.getTrialsOfType('poldrack-single-stim')
    var missed_count = 0
    var trial_count = 0
    var rt_array = []
    
    // 记录参与者的选择
    var choice_counts = {}
    choice_counts[-1] = 0
    choice_counts[32] = 0
    
    for (var i = 0; i < experiment_data.length; i++) {
        if (experiment_data[i].possible_responses != 'none') {
            trial_count += 1
            rt = experiment_data[i].rt
            key = experiment_data[i].key_press
            choice_counts[key] += 1
            if (rt == -1) {
                missed_count += 1
            } else {
                rt_array.push(rt)
            }
        }
    }
    
    // 计算平均反应时间
    var avg_rt = -1
    if (rt_array.length !== 0) {
        avg_rt = math.median(rt_array)
    }
    
    // 质量控制标准
    credit_var = (avg_rt > 200)  // 反应时间 > 200ms
    jsPsych.data.addDataToLastTrial({"credit_var": credit_var})
}
```

### 数据质量标准:
1. **反应时间过滤**: 过快反应(<200ms)被标记为无效
2. **完成率检查**: 计算总体参与度和注意力保持
3. **反应模式分析**: 识别随机反应或策略性反应
4. **一致性验证**: 检查练习和测试阶段的表现一致性

## 实验参数设置

### 刺激参数 (`experiment.js:98-148`):
- **Go刺激数量**: 每个NoGo刺激对应9个Go刺激
- **练习试次**: 10个试次（5 Go + 5 NoGo）
- **测试试次**: 350个试次（315 Go + 35 NoGo）
- **刺激随机化**: 每次运行随机分配颜色-条件对应

### 时间参数:
- **刺激呈现时间**: 750ms
- **反应窗口**: 750-1500ms（可变）
- **反馈持续时间**: 1000ms（仅练习阶段）
- **试次间间隔**: 250ms

## 数据分析方法

### 1. 描述性统计
- **Go试次**: 平均RT、RT标准差、正确率
- **NoGo试次**: 虚报率、抑制成功率
- **整体表现**: 总体正确率、反应偏向

### 2. 信号检测分析
```javascript
// 计算信号检测指标
Hit_Rate = Go_Correct / Total_Go_Trials
False_Alarm_Rate = NoGo_Errors / Total_NoGo_Trials
d_prime = Z(Hit_Rate) - Z(False_Alarm_Rate)
c = -0.5 * (Z(Hit_Rate) + Z(False_Alarm_Rate))
```

### 3. 反应时间分布分析
- **Ex-Gaussian分布拟合**: 分析RT分布特征
- **分位数分析**: 不同百分位数的RT表现
- **变异性指标**: 个体内反应时间变异系数

### 4. 学习效应分析
- **跨试次趋势**: 分析表现随时间的变化
- **疲劳效应**: 检查后期试次的表现下降
- **适应性变化**: 策略调整和学习适应

## 个体差异因素

### 1. 年龄效应
- **儿童**: 抑制控制能力仍在发展，虚报率较高
- **青少年**: 冲动控制相对较差，RT变异性大
- **成人**: 最佳抑制控制表现期
- **老年人**: 抑制效率下降，补偿策略增加

### 2. 性别差异
- **男性**: 通常反应更快但冲动性较高
- **女性**: 抑制控制相对更好但反应较保守
- **激素影响**: 月经周期对执行控制的调节作用

### 3. 个体特质
- **人格因素**: 尽责性与抑制控制能力正相关
- **认知能力**: 工作记忆容量影响任务表现
- **注意特质**: 注意缺陷影响Go和NoGo表现

### 4. 状态因素
- **疲劳水平**: 影响反应速度和抑制准确性
- **情绪状态**: 焦虑和抑郁调节执行控制
- **动机强度**: 外在激励影响任务投入度

## 技术实现特点

### 1. jsPsych框架优势
- **精确时间控制**: 毫秒级的刺激呈现和反应测量
- **跨平台兼容**: 支持不同操作系统和浏览器
- **插件化架构**: 灵活的实验组件组合
- **标准化流程**: 符合心理学实验规范

### 2. 刺激呈现控制
- **CSS样式控制**: 精确的视觉刺激呈现
- **颜色标准化**: 一致的刺激特征
- **屏幕居中**: 减少空间位置偏差
- **响应式设计**: 适应不同屏幕尺寸

### 3. 数据完整性
- **自动数据记录**: 每个试次的完整信息
- **错误处理机制**: 网络失败时的本地保存
- **数据格式标准**: 便于后续统计分析

## 扩展应用方向

### 1. 任务变体
- **情绪Go-NoGo**: 使用情绪面孔作为刺激
- **言语Go-NoGo**: 基于语义分类的抑制任务
- **空间Go-NoGo**: 结合空间位置的抑制控制
- **连续性能任务**: 长时间持续注意版本

### 2. 技术整合
- **眼动追踪**: 分析视觉注意分配模式
- **脑电记录**: 同步记录神经电生理信号
- **虚拟现实**: 沉浸式环境下的抑制控制
- **移动平台**: 智能手机和平板电脑版本

### 3. 应用拓展
- **教育评估**: 学生自控力和注意力评估
- **驾驶安全**: 驾驶员抑制控制能力测试
- **运动心理学**: 运动员反应抑制训练
- **老年认知**: 认知老化和痴呆筛查

## 结果解释指导

### 1. 正常表现范围
- **Go试次RT**: 通常300-600ms
- **Go试次正确率**: >95%
- **NoGo虚报率**: <20%
- **d'敏感性**: >1.0

### 2. 异常模式识别
- **过度冲动**: NoGo虚报率>30%
- **过度保守**: Go试次RT>800ms或遗漏率>10%
- **注意缺陷**: RT变异性过大(CV>0.3)
- **疲劳效应**: 后期试次表现显著下降

### 3. 临床意义解释
- **轻度异常**: 可能的注意或执行控制问题
- **中度异常**: 需要进一步专业评估
- **重度异常**: 强烈建议临床干预
- **发展考虑**: 结合年龄常模进行解释

该Go-NoGo反应抑制任务为评估执行控制和认知灵活性提供了标准化的测量工具，其基于jsPsych的技术实现确保了数据收集的准确性和可靠性，为认知神经科学研究和临床实践提供了重要的评估手段。