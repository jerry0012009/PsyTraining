# Space Adventure Planning Depth 数据保存机制

## 数据保存方式

这是一个太空探险计划深度认知任务，使用jQuery AJAX进行数据传输：

### 1. 服务器保存 (唯一方式)
- **端点**: `POST /save`
- **数据格式**: JSON字符串化的 mainData 对象
- **触发时机**: 实验完成时 (`uploadResults()` 函数)
- **成功后**: 自动跳转到 `/next`

### 2. 错误处理
- **超时错误 (400)**: 显示会话超时警告，跳转到 `/next`
- **其他错误**: 显示未知错误警告，跳转到 `/next`
- **无本地备份机制**: 不同于其他游戏，此任务不提供本地保存选项

## 保存的数据内容

### 主数据结构 (mainData)

#### 基本信息
- `age`: 年龄信息 (默认0)
- `gender`: 性别信息 (默认0)
- `group`: 组别信息 (默认0)
- `balancingCondition`: 平衡条件 (默认1)
- `startingPoints`: 起始分数 (默认350)

#### 反应数据 (responses)
- `RT`: 反应时间数组，包含每个试验的所有反应时间
- `actions`: 用户行动数组 (1=移动, 2=跳跃)

#### 游戏状态数据
- `states`: 每个试验的状态序列数组
- `points`: 每个试验的得分变化数组
- `planetConfigurations`: 星球配置信息

#### 实验条件 (conditions)
- `notrials`: 试验数量数组
- `noise`: 噪声条件数组 ('high'/'low')

#### 其他指标
- `noPatternTrainings`: 模式训练完成次数
- `indexExp`: 实验索引信息
- `labelsExp`: 实验标签信息

## 数据收集流程

### 1. 试验过程中
- **按键记录**: 记录移动(M)和跳跃(Y)键的按压
- **时间戳**: 记录刺激显示时间、按键时间、动画结束时间
- **状态跟踪**: 记录火箭位置、得分变化、星球奖励

### 2. 试验结束时 (`recordData()`)
- **数据整合**: 将单个试验数据添加到主数组中
- **反应时计算**: 计算相对于刺激显示的反应时间
- **数组重置**: 清空临时变量准备下一试验

### 3. 实验完成时 (`uploadResults()`)
- **数据推送**: 调用 `pushDataMain()` 整合所有数据
- **服务器传输**: 通过 AJAX POST 发送 JSON 字符串化的数据

## 认知评估指标

此任务测量以下认知能力：
- **计划深度**: 通过多步骤决策序列测量前瞻性规划能力
- **认知灵活性**: 在不同噪声条件下适应策略
- **风险评估**: 在跳跃行动的不确定性中做出决策
- **学习能力**: 通过星球奖励学习最优路径
- **工作记忆**: 在复杂环境中保持和更新信息

## 实验阶段

1. **介绍阶段**: 学习基本操作和游戏规则
2. **不确定性学习**: 体验低/高噪声条件下的跳跃成功率
3. **主实验**: 在真实条件下完成多个试验块
4. **数据上传**: 自动保存所有收集的认知数据

数据包含完整的行为序列和时间信息，可用于深入分析计划策略和认知灵活性。