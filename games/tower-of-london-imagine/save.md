# Tower of London Imagine - 数据保存机制

## 概述
伦敦塔想象任务，经典的执行功能和规划能力认知评估工具。任务要求参与者在心理层面想象如何通过最少的步数将彩色球从起始配置移动到目标配置，无需实际操作，纯粹依靠心理想象和规划能力。

## 数据保存机制

### 数据收集
- **任务类型**: 基于jsPsych框架的认知评估任务
- **理论基础**: 伦敦塔测试（Tower of London Test），评估执行功能
- **测量维度**: 规划能力、工作记忆、问题解决策略
- **任务特点**: 想象操作（非实际拖拽），考验纯粹的心理规划能力
- **数据类型**: 
  - 每个问题的预估解决步数
  - 反应时间 (rt)
  - 问题配置 (problem)
  - 标准答案 (answer)
  - 试验元数据 (trial_id, exp_stage)

### 数据保存流程
1. **数据序列化**: 使用 `jsPsych.data.dataAsJSON()` 将所有试验数据序列化为JSON格式
2. **服务器保存尝试**: 
   - 通过AJAX POST请求发送到 `/save` 端点
   - 数据格式: JSON
3. **本地备份保存**: 
   - 当服务器不可用时，自动触发本地保存
   - 使用 `jsPsych.data.localSave()` 函数
   - 保存格式: CSV
   - 文件名: `tower-of-london-imagine_results.csv`

### 数据内容结构
- **问题数据**: 每个伦敦塔问题的球位置配置矩阵
- **参与者响应**: 对每个问题预估的最少解决步数（1-10+）
- **时间数据**: 每个问题的思考和回答时间
- **标准答案**: 每个问题的实际最优解步数
- **任务元数据**: 试验序号、任务阶段标识
- **认知指标**: 规划准确性、反应时间、策略使用

### 任务设计特点
**认知负荷设计**:
- 纯想象操作，排除了运动技能的影响
- 多层级规划要求，从简单到复杂问题
- 时间限制创造认知压力环境

**执行功能评估**:
- **规划能力**: 提前预见解决步骤的能力
- **工作记忆**: 保持问题状态和目标的能力  
- **认知灵活性**: 调整策略和解决复杂配置的能力

### 关键特征
- **双重保存机制**: 服务器优先，本地备份
- **完整认知数据**: 包含反应时间和准确性的综合评估
- **标准化格式**: CSV格式便于统计分析和心理测量
- **执行功能专用**: 专门测量高级认知能力的数据结构
- **想象任务设计**: 纯认知负荷，排除运动干扰因素

### 文件位置
- 本地保存文件: `tower-of-london-imagine_results.csv`（下载到用户默认下载文件夹）
- 服务器保存: 通过 `/save` API端点处理