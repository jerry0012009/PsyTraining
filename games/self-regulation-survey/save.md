# 简式自我调节问卷 (SSRQ) 数据保存机制

## 概述
这是一个基于ExpFactory框架的心理学调查问卷，用于评估个体的自我调节能力。

## 数据保存方式

### 1. 数据收集
- 问卷通过HTML表单收集用户对各种自我调节相关陈述的回答
- 使用李克特量表（5点评分：非常不同意到非常同意）
- 每个问题包含问题文本、选项和用户选择的数值

### 2. 数据结构
收集的数据包含以下字段：
```javascript
{
    "question_index": "问题索引",
    "question": "问题文本", 
    "response": "用户回答的数值(1-5)",
    "options": "选项文本列表",
    "text": "问题完整文本"
}
```

### 3. 保存机制
调查完成后，系统采用双重保存策略：

#### 服务器保存（首选）
- **端点**: POST `/save`
- **数据格式**: JSON数组包含所有问题的回答
- **成功后**: 重定向到 `/next` 页面

#### 本地保存（备用方案）
当服务器不可用时：
- **触发条件**: AJAX POST 请求失败
- **保存方式**: 自动下载JSON文件到本地
- **文件名**: `self-regulation-survey_result.json`
- **实现**: 创建临时下载链接，用户点击下载

### 4. 技术实现
- 使用jQuery和jQuery Wizard插件管理表单流程
- 表单提交时收集所有input、textarea、number类型字段
- 通过AJAX发送数据到服务器
- 错误处理：服务器不可用时自动切换到本地下载

### 5. 数据用途
收集的数据用于：
- 评估个体自我调节能力水平
- 心理学研究分析
- 认知能力评估报告生成

## 注意事项
- 本地保存的文件需要手动上传到分析系统
- 数据包含敏感的心理评估信息，需要妥善保管
- 建议在网络环境良好时使用，确保数据成功上传到服务器