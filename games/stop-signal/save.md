# Stop-Signal 任务数据保存说明

## 任务概述
Stop-Signal任务是经典的抑制控制测试，用于评估执行功能和认知控制能力。被试需要对出现的形状刺激快速反应，但当出现停止信号（星形）时必须抑制反应。

## 数据保存机制

### 技术架构
- **实验框架**: jsPsych 实验心理学框架
- **核心插件**: stop-signal 插件，专门设计用于停止信号任务
- **辅助插件**: poldrack-single-stim（无停止信号练习）、poldrack-categorize（反馈练习）
- **自适应算法**: 阶梯法调整停止信号延迟（SSD）

### 任务设计

#### 刺激设置
- **GO刺激**: 4种几何形状（五角形、沙漏、泪滴、方形）
- **反应键**: M键和Z键（随机分配）
- **停止信号**: 黑色星形叠加在形状上
- **刺激时间**: 850ms，总反应时间1850ms

#### 实验阶段结构
1. **无停止信号练习**: 12个试验，熟悉形状-按键映射
2. **停止信号练习**: 20个试验，学习抑制控制
3. **正式测试**: 6个区块，每区块50个试验

### 保存的数据字段

#### 试验基础信息
```javascript
{
    trial_id: "stim",              // 试验类型标识
    exp_stage: "practice|test",    // 实验阶段
    SS_trial_type: "go|stop",      // 试验类型（GO或停止）
    condition: "high|low",         // 停止信号频率条件
    trial_num: 0                   // 试验序号
}
```

#### 刺激与反应数据
- **stimulus**: 呈现的形状HTML代码
- **correct_response**: 正确反应键码
- **key_press**: 被试实际按键
- **rt**: 反应时间（毫秒，-1表示未反应）
- **correct**: 反应正确性（true/false）

#### 停止信号特有数据
- **SS_stimulus**: 停止信号刺激（星形）
- **SSD**: 当前停止信号延迟时间（毫秒）
- **SS_trial_type**: "go"或"stop"试验类型

### 阶梯法SSD调节机制

#### 动态调整算法
```javascript
// SSD调整规则
if (SS_trial_type == 'stop') {
    if (rt == -1 && SSD < 850) {       // 成功停止且SSD未达上限
        SSD = SSD + 50;                 // 增加延迟，使停止更困难
    } else if (rt != -1 && SSD > 0) {  // 未能停止且SSD未达下限
        SSD = SSD - 50;                 // 减少延迟，使停止更容易
    }
}
```

#### SSD参数管理
- **初始SSD**: 250ms
- **调整步长**: 50ms
- **SSD范围**: 0-850ms
- **目标成功率**: 约50%

### 数据分析指标

#### 性能评估函数（assessPerformance）
```javascript
// 关键测量指标
var missed_count = 0;           // GO试验遗漏次数
var rt_array = [];              // 有效反应时间数组
var successful_stops = 0;       // 成功停止次数
var avg_rt = math.median(rt_array);  // 中位GO反应时间
var StopCorrect_percent = successful_stops / stop_length;  // 停止成功率
```

#### 数据质量标准
- **遗漏率**: < 40% 
- **最低反应时间**: > 200ms
- **反应分布**: 单一按键使用率 < 85%
- **停止成功率**: 20%-80% 为理想范围

### Stop-Signal效应分析

#### 核心测量指标
1. **GO反应时间**: 只包含GO试验的反应时间
2. **停止成功率**: 成功抑制反应的试验百分比
3. **停止信号反应时间(SSRT)**: 停止过程的估计时间
4. **SSD平均值**: 阶梯法收敛的平均停止信号延迟

#### SSRT计算方法
- **积分法**: SSRT = GO_RT分布的n分位数 - 平均SSD
- **n = 停止失败率** (如失败率25%，则取75%分位数)

### 实验流程控制

#### 练习阶段循环条件
```javascript
// 练习完成标准
(average_rt < RT_thresh &&           // 反应时间 < 1000ms
 GoCorrect_percent > accuracy_thresh &&  // 准确率 > 80%
 missed_responses < missed_response_thresh && // 遗漏率 < 10%
 StopCorrect_percent > 0.2 && StopCorrect_percent < 0.8) // 停止率20%-80%
```

#### 反馈与调整机制
- **反应过慢警告**: RT > 1000ms 或 RT增长 > 75ms
- **遗漏过多警告**: 遗漏率 ≥ 10%
- **准确率低警告**: 准确率 < 80%
- **停止不当警告**: 停止率 < 30% 或 > 70%

### 认知功能评估

#### 执行功能指标
1. **抑制控制**: 停止成功率和SSRT
2. **反应灵活性**: SSD适应性调整
3. **注意监控**: GO试验准确率和稳定性
4. **冲动控制**: 停止信号出现时的抑制能力

#### 临床应用价值
- **ADHD评估**: 抑制控制缺陷的客观测量
- **冲动性障碍**: 行为抑制能力评估
- **执行功能评估**: 前额叶认知控制功能
- **神经心理评估**: 脑损伤对抑制功能的影响

### 实验设计特点

#### 条件平衡
- **停止信号频率**: 高频(40%) vs 低频(20%)
- **刺激随机化**: 形状和停止试验随机分布
- **区块设计**: 6个测试区块，区块间休息

#### 质量控制
- **注意力检查**: 特定试验中插入注意检测
- **实时反馈**: 练习阶段提供详细表现反馈
- **自适应调整**: SSD根据个体表现自动调整

### 数据导出格式
jsPsych自动保存为JSON格式，包含：
- 每个试验的完整反应数据和停止信号信息
- SSD调整轨迹和最终收敛值
- 性能评估结果和数据质量指标
- 可计算SSRT和其他抑制控制指标

## 临床应用价值
Stop-Signal任务广泛应用于：
- **执行功能评估**: 抑制控制和认知灵活性测量
- **ADHD诊断**: 注意缺陷多动障碍的核心症状评估
- **冲动性研究**: 病理性冲动行为的客观测量
- **神经心理学**: 前额叶-皮质下环路功能评估
- **药物效应**: 精神药物对执行功能的影响

## 注意事项
- 确保被试理解GO和STOP任务的平衡要求
- 强调"赛跑"概念：GO反应和STOP过程的竞争
- 监控停止成功率，确保在20%-80%范围内
- 避免策略性减慢，保持正常GO反应速度