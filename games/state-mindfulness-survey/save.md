# State Mindfulness Survey 数据保存机制

## 数据保存方式

这是一个正念状态调查问卷，评估被试在过去15分钟内的正念体验，使用jQuery AJAX进行数据传输，具有双重保存策略：

### 1. 服务器保存 (首选)
- **端点**: `POST /save`
- **数据格式**: JSON Array
- **触发时机**: 表单提交时 (点击"完成"按钮)
- **成功后**: 自动跳转到 `/next`

### 2. 本地保存 (备用)
- **文件名**: `state-mindfulness-survey_result.json`
- **格式**: JSON
- **触发条件**: 当服务器端点不可用或返回错误时
- **保存方法**: 自动下载到浏览器默认下载位置

## 保存的数据内容

### 数据结构
每个问题的回答保存为一个对象，包含以下属性：

```json
{
  "name": "问题字段名称",
  "value": "选择的数值(1-5)", 
  "options": "完全不是| 有一点| 有些| 相当符合| 非常符合",
  "text": "问题文本内容"
}
```

### 正念维度测量

#### 问题内容 (基于State Mindfulness Scale)
调查问卷包含多个维度的正念状态评估：

1. **情绪觉察**
   - "我意识到了在我内心产生的不同情绪"

2. **接纳态度**  
   - "我尝试去关注令人愉快和不快的体验"

3. **好奇心**
   - "我觉得我的一些体验很有趣"

4. **当下觉知**
   - 评估对当前时刻体验的关注程度

5. **非判断性观察**
   - 评估对内在体验的开放和接纳态度

### 评分量表
- **1**: 完全不是 (最低正念水平)
- **2**: 有一点
- **3**: 有些  
- **4**: 相当符合
- **5**: 非常符合 (最高正念水平)

## 数据处理流程

1. **表单验证**: 检查所有必填问题是否完整回答
2. **数据收集**: 遍历所有已选择的单选按钮，提取答案值和元数据
3. **数据组装**: 将回答信息组织为JSON数组格式
4. **服务器提交**: AJAX POST到 `/save` 端点
5. **备用机制**: 失败时生成下载链接，保存为JSON文件

## 验证规则

- **必填验证**: 所有正念状态问题都是必填项
- **单选限制**: 每个问题只能选择一个选项
- **错误提示**: 未回答的问题会标红提示，并弹出警告

## 认知评估价值

此问卷测量以下正念相关构念：
- **状态正念水平**: 短期内（过去15分钟）的正念体验
- **觉察能力**: 对内在情绪和体验的察觉程度
- **接纳态度**: 对不同体验的开放和非判断性态度
- **当下专注**: 对现时体验的关注集中程度

## 应用场景

- **认知训练前后评估**: 测量训练对正念状态的即时影响
- **情绪调节研究**: 评估正念水平与情绪管理的关系
- **注意力研究**: 了解正念状态与注意力表现的关联
- **干预效果评估**: 评估正念练习或冥想的短期效果

数据可用于分析正念状态与其他认知任务表现之间的关系，以及评估不同认知训练方法对正念水平的影响。