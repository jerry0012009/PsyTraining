# Save Data Documentation - Add It Up Zen

## 数据输出格式

### 基本信息
- **框架**: Phaser.js游戏引擎
- **输出格式**: JSON数组
- **保存机制**: AJAX POST请求 + 本地JSON下载
- **游戏类型**: 禅修式数学加法训练

## 保存流程

1. **平静状态数据收集**: 每道题完成后保存到数组
2. **服务器同步**: 游戏结束时POST到 `/save` 端点
3. **本地冥想记录**: 服务器失败时自动下载JSON文件

```javascript
// 禅修模式保存流程
function sendData(trial) {
    inputData('trial', trial);
    this.taskdata.push(this.data);
    
    if (data.finished == 1) {
        // 冥想训练结束，同步数据
        $.ajax({
            type: "POST",
            url: '/save', 
            data: { "data": JSON.stringify(this.taskdata) },
            success: function(){ document.location = "/next" },
            error: function(err) {
                // 本地保存冥想记录
                downloadObjectAsJson(this.taskdata, "zen-meditation-results");
            }
        });
    }
}
```

## 数据结构

### 每道题记录的字段

| 字段名 | 类型 | 描述 |
|--------|------|------|
| `answer` | number | 用户冥想式输入的答案 |
| `problem` | string | 冥想题目表达式 (如: "5 + 3 = ?") |
| `n1` | number | 第一个冥想数字 |
| `n2` | number | 第二个冥想数字 |
| `problem_id` | string | 冥想题目ID标识符 |
| `points` | number | 当前心境平静积分 |
| `solution` | number | 正确的心算答案 (n1 + n2) |
| `RT` | number | 冥想反应时间 (秒) |
| `ACC` | number | 正念准确性 (1=正确, 0=错误) |
| `finished` | number | 是否完成冥想训练 (1=完成, 0=未完成) |
| `trial` | number | 冥想轮次编号 (从0开始) |

### 禅修模式特点
- **缓慢节奏**: 不强调速度，重视准确性和专注
- **正念计算**: 鼓励深入思考每个数字
- **内心平静**: 通过数学运算达到冥想状态

## 示例数据

### JSON格式示例

```json
[
  {
    "answer": 8,
    "problem": "5 + 3 = ?",
    "n1": 5,
    "n2": 3,
    "problem_id": "zen_add_5_3",
    "points": 30,
    "solution": 8,
    "RT": 3.245,
    "ACC": 1,
    "finished": 0,
    "trial": 0
  },
  {
    "answer": 12,
    "problem": "7 + ? = 12",
    "n1": 7,
    "n2": 5, 
    "problem_id": "zen_add_7_5_mindful",
    "points": 60,
    "solution": 12,
    "RT": 4.856,
    "ACC": 1,
    "finished": 0,
    "trial": 1
  },
  {
    "answer": 15,
    "problem": "9 + 4 = ?",
    "n1": 9,
    "n2": 4,
    "problem_id": "zen_add_9_4",
    "points": 90,
    "solution": 13,
    "RT": 2.195,
    "ACC": 0,
    "finished": 1,
    "trial": 2
  }
]
```

## 认知指标评估

### 专注力指标
- **深度专注时间**: 较长的RT反映深入思考
- **专注稳定性**: RT变异系数评估注意力稳定
- **正念状态**: 准确率在放松状态下的维持

### 心理健康指标
- **冥想深度**: 通过RT分布评估冥想投入程度
- **情绪调节**: 错误后的RT恢复模式
- **心境平衡**: 整体表现的一致性

### 认知功能指标
- **执行控制**: 在放松状态下的认知控制能力
- **工作记忆**: 心算准确性
- **抑制控制**: 抗干扰能力

## 游戏机制

### 禅修计分系统
- **平静奖励**: 正确答案获得心境积分
- **专注加成**: 适中的反应时间额外奖励
- **连续冥想**: 连续正确的冥想状态加分

### 禅修难度设计
- **渐进式**: 从简单题目开始建立专注
- **适应性**: 根据冥想状态调整难度
- **无时间压力**: 允许充分的思考和专注时间

### 正念反馈
- **温和提示**: 柔和的正确/错误反馈
- **进度展示**: 平静的进度条和积分显示
- **冥想结束**: 温和的完成提示和心境总结

## 数据分析应用

### 冥想效果评估
- **专注深度**: 平均RT和RT稳定性
- **正念准确性**: ACC在放松状态下的表现
- **冥想持续性**: 整个过程的专注维持

### 心理健康监测
- **焦虑水平**: 异常快速或缓慢的反应模式
- **情绪稳定**: 表现的一致性和波动
- **压力反应**: 错误后的恢复模式

### 认知训练效果
- **执行功能**: 冥想状态下的认知控制
- **注意力训练**: 专注力的持续和稳定
- **情绪调节**: 通过数学冥想的情绪平衡

## 与Lightning模式对比

### 核心差异
- **节奏**: Zen强调缓慢深入，Lightning强调快速反应
- **目标**: Zen追求内心平静，Lightning追求认知速度
- **评估**: Zen重视专注稳定，Lightning重视反应效率

### 数据解读差异
- **RT解读**: Zen中较长RT为积极指标，Lightning中为消极指标
- **ACC重要性**: Zen中准确性优于速度，Lightning中需要权衡
- **进度模式**: Zen追求渐进式改善，Lightning追求快速提升

## 注意事项

1. **冥想环境**: 确保安静的测试环境以支持专注状态
2. **时间充裕**: 不对用户施加时间压力，允许深入思考
3. **数据完整性**: 记录完整的冥想过程数据
4. **情绪状态**: 注意用户的情绪和压力状态对数据的影响
5. **冥想指导**: 提供适当的正念指导以优化训练效果