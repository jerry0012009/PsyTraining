# 局部-整体形状实验 (Local-Global Shape) 数据保存机制

## 保存方式

### 主要保存方法
- **在线保存**: 实验结束时通过 AJAX POST 请求将数据发送到 `/save` 端点
- **本地备份**: 当在线保存失败时，自动触发本地保存

### 保存的文件
- **文件名**: `local-global-shape_results.csv`
- **格式**: CSV格式
- **位置**: 浏览器下载文件夹

## 数据内容

### 收集的数据类型
1. **实验配置数据**
   - 试验ID (trial_id)
   - 实验阶段 (exp_stage: 'practice' / 'test')
   - 条件 (condition: 'global' / 'local')
   - 整体形状 (global_shape: 几何形状如正方形、菱形、圆形等)
   - 局部形状 (local_shape: 组成整体形状的小形状)

2. **被试反应数据**
   - 反应时间 (rt)
   - 按键反应 (key_press)
   - 正确答案 (correct_response)
   - 正确性 (correct: true/false)
   - 试验编号 (trial_num)

3. **实验控制变量**
   - 转换试验标记 (switch: 0/1, 表示是否从上一试验转换注意焦点)
   - 任务颜色分配 (随机分配颜色对应全局或局部条件)

4. **性能评估数据**
   - 注意力检查数据
   - 后任务问卷回答
   - 总体表现评估 (credit_var)

### 实验设计
- **练习阶段**: 包含反馈的练习试验
- **正式测试**: 无反馈的测试试验
- **核心任务**: 根据刺激颜色判断大形状(全局)还是小形状(局部)的特定特征
- **颜色-注意分配**: 
  - 一种颜色对应全局注意(判断整体形状特征)
  - 另一种颜色对应局部注意(判断组成成分的特征)

## 数据流程

1. **数据收集**: jsPsych框架自动收集每个试验的反应时间、按键、正确性等数据
2. **图像预加载**: 实验开始前预加载所有形状图像文件
3. **性能评估**: 实验结束时计算总体表现指标，包括遗漏率、平均反应时间、反应分布等
4. **数据序列化**: 将收集的数据转换为JSON格式
5. **保存尝试**: 
   - 首先尝试POST到服务器 `/save` 端点
   - 成功则跳转到 `/next` 页面
   - 失败则触发本地CSV下载
6. **本地保存**: 使用 `jsPsych.data.localSave()` 方法保存为CSV文件

## 认知测量

### 测量的认知能力
- **视觉空间注意**: 根据颜色提示选择性地注意全局或局部形状特征
- **认知转换**: 在全局和局部视觉处理模式之间的转换能力
- **形状识别**: 快速准确识别几何形状的能力
- **视觉抑制**: 抑制无关视觉维度的干扰

### 关键指标
- **转换成本**: 转换试验vs重复试验的反应时间差异
- **全局-局部偏好**: 不同处理模式下的速度和准确性差异
- **形状识别准确率**: 不同条件下的正确识别率
- **反应时间模式**: 不同形状复杂度下的处理速度

## 与字母版本的区别

- **刺激类型**: 使用几何形状代替字母，减少语言影响
- **文化中立性**: 形状识别相对不受文化和语言背景影响
- **视觉复杂性**: 形状的视觉特征可能与字母不同
- **处理策略**: 可能激活不同的视觉处理机制

## 重要说明

- 该实验是经典Navon任务的形状版本，适用于跨文化研究
- 数据保存采用双重保障机制（在线+本地）
- 包含自动图像预加载功能，确保呈现流畅
- 支持详细的性能评估和数据质量控制
- 实验包含中文界面和指导说明