# Writing Task 任务数据保存说明

## 任务概述
Writing Task是一个表达性写作认知评估任务，用于评估语言产生能力、工作记忆、执行功能和创造性思维。被试需要根据特定提示进行连续写作，通常持续5分钟，测量写作流畅性、内容组织和认知控制能力。

## 数据保存机制

### 技术架构
- **实验框架**: jsPsych 实验心理学框架
- **核心插件**: writing插件，专门用于文本输入和时间控制
- **辅助插件**: survey-text（问卷）、poldrack-instructions（指导语）
- **时间控制**: 精确的时间限制和自动结束机制
- **文本存储**: 完整的写作内容和时间戳记录

### 任务设计

#### 写作提示设置
- **标准提示**: "上个月发生了什么？"（回忆性叙述写作）
- **写作时长**: 默认5分钟（可配置）
- **写作要求**: 持续写作，保持专注
- **初始文本**: 提供写作提示作为起始文本

#### 时间控制系统
```javascript
var timelimit = 5;                    // 写作时间限制（分钟）
var writing_start = 0;                // 写作开始时间戳
var elapsed = 0;                      // 已经过时间

var getResponseTime = function() {
    if (writing_start === 0) {
        writing_start = new Date();   // 记录开始时间
    }
    var timeLeft = (timelimit - elapsed) * 60000;  // 剩余时间（毫秒）
    return timeLeft;
}
```

### 保存的数据字段

#### 写作任务数据
```javascript
{
    trial_id: "write",               // 写作任务标识
    exp_stage: "test",               // 实验阶段
    trial_type: "writing",           // 试验类型
    text_class: "writing_class",     // 文本样式类
    initial_text: "请在此处写作 5 分钟。",  // 初始提示文本
    response: "用户的完整写作内容...",   // 被试的写作文本
    rt: 300000,                      // 总写作时间（毫秒）
    timing_post_trial: 0,            // 试验后间隔
    timing_response: 300000          // 反应时间限制（5分钟）
}
```

#### 指导语数据
```javascript
{
    trial_id: "instruction",         // 指导语标识
    trial_type: "poldrack-instructions", // 试验类型
    view_history: [...],             // 页面浏览历史
    rt: 15234,                       // 阅读指导语时间
    key_press: 13,                   // 按键反应（Enter键）
    sumInstructTime: 15234           // 累计指导语阅读时间
}
```

#### 问卷调查数据
```javascript
{
    trial_id: "post task questions", // 任务后问卷标识
    trial_type: "survey-text",       // 调查类型
    responses: {
        "Q0": "任务要求写作5分钟...",    // 问题0回答
        "Q1": "任务设计合理..."         // 问题1回答
    },
    rt: 45678                        // 问卷完成时间
}
```

### 写作插件机制

#### Writing插件特点
```javascript
var write_block = {
    type: 'writing',                 // 专用写作插件
    data: {
        trial_id: "write",
        exp_stage: 'test'
    },
    text_class: 'writing_class',     // CSS样式控制
    is_html: true,                   // HTML格式支持
    initial_text: '请在此处写作 5 分钟。', // 初始文本
    timing_post_trial: 0,            // 无试验间间隔
    timing_response: timelimit * 60000  // 精确时间控制
};
```

#### 自动时间管理
- **开始检测**: 自动检测用户开始输入
- **时间跟踪**: 实时监控写作进度
- **自动结束**: 时间到达后自动提交
- **文本保存**: 完整保存所有输入内容

### 文本分析维度

#### 基础写作指标
1. **字数统计**: 总字符数、词汇数、句子数
2. **写作速度**: 每分钟字数（WPM）或字符数
3. **流畅性**: 持续写作vs停顿模式
4. **完整性**: 写作内容的完整度和结构

#### 语言复杂性指标
1. **词汇丰富性**: 词汇类型与标记比（Type-Token Ratio）
2. **句法复杂性**: 平均句长、从句使用频率
3. **连贯性**: 话题连续性和逻辑结构
4. **创造性**: 内容原创性和想象力

### 认知功能评估

#### 执行功能指标
1. **认知控制**: 维持写作任务目标的能力
2. **抑制控制**: 抑制无关思想和干扰的能力
3. **认知灵活性**: 在不同话题间转换的灵活性
4. **计划组织**: 文本结构的预先规划能力

#### 工作记忆评估
- **信息维持**: 保持写作主题和已写内容的能力
- **信息整合**: 整合新旧信息构建连贯文本
- **同时处理**: 同时进行内容产生和语言表达
- **认知负荷**: 多任务处理的认知资源需求

### 语言产生机制

#### 概念化阶段
1. **内容规划**: 确定写作内容和组织结构
2. **话题发展**: 从初始提示展开相关话题
3. **记忆提取**: 激活相关的个人经历和知识
4. **创意产生**: 生成新颖和有趣的内容

#### 表达阶段
1. **词汇选择**: 选择合适的词汇表达概念
2. **句法构建**: 组织语法正确的句子结构
3. **语篇连贯**: 建立句间和段间的连接关系
4. **文本润色**: 修改和改进表达效果

### 时间动态分析

#### 写作节奏分析
```javascript
// 可通过击键时间戳分析写作节奏
var keystroke_intervals = [];        // 击键间隔时间
var pause_durations = [];            // 停顿持续时间
var burst_lengths = [];              // 连续输入长度

// 分析写作流畅性模式
var fluency_pattern = {
    continuous_writing: 0,           // 连续写作时间
    pause_frequency: 0,              // 停顿频率
    revision_count: 0,               // 修改次数
    hesitation_points: []            // 犹豫点位置
};
```

#### 内容发展轨迹
1. **开头效应**: 写作开始的反应时间和内容质量
2. **中期维持**: 写作中期的内容产出和质量维持
3. **结尾效应**: 时间临近结束时的表现变化
4. **整体连贯**: 全文的主题一致性和结构完整性

### 个体差异指标

#### 写作能力差异
- **基础写作技能**: 语法、拼写、标点的准确性
- **表达能力**: 思想表达的清晰度和准确性
- **创造性水平**: 内容的原创性和想象力
- **组织能力**: 文本结构的逻辑性和条理性

#### 认知策略差异
1. **规划策略**: 预先规划vs即兴写作
2. **修正策略**: 边写边改vs完成后修改
3. **内容策略**: 深入挖掘vs广泛涉及
4. **时间管理**: 均匀分配vs前重后轻

### 数据质量控制

#### 参与度评估
```javascript
var quality_indicators = {
    word_count: 0,                   // 总词数
    meaningful_content: true,        // 内容是否有意义
    on_topic: true,                  // 是否切题
    effort_level: "high|medium|low", // 努力程度
    coherence: "high|medium|low"     // 连贯性水平
};
```

#### 无效数据识别
- **空白提交**: 无实质内容的提交
- **复制粘贴**: 重复内容或外部复制
- **无关内容**: 与写作提示无关的内容
- **敷衍应付**: 明显缺乏努力的简短回应

### 计算语言学分析

#### 自动化文本分析
1. **情感分析**: 文本的情感倾向和强度
2. **主题建模**: 主要话题和内容分布
3. **语言复杂度**: 自动化的语言复杂性评估
4. **一致性分析**: 文本内部一致性和连贯性

#### 机器学习应用
- **写作质量预测**: 基于特征的写作质量自动评估
- **认知状态推断**: 从文本特征推断认知功能状态
- **个体分类**: 基于写作模式的个体差异识别
- **发展轨迹**: 写作能力发展的纵向追踪

### 数据分析方法

#### 基础统计指标
1. **描述统计**: 字数、词汇丰富性、句长等基本统计
2. **时间分析**: 写作速度、停顿模式、节奏变化
3. **质量评估**: 内容质量、语言质量、创造性评分
4. **比较分析**: 不同组别或时间点的对比

#### 高级分析技术
1. **潜在语义分析**: 内容主题和语义结构分析
2. **时间序列分析**: 写作过程的动态变化模式
3. **网络分析**: 概念间关系和语义网络
4. **认知建模**: 写作过程的认知机制建模

### 数据导出格式
jsPsych自动保存为JSON格式，包含：
- 完整的写作文本内容和时间信息
- 任务前后的指导语和问卷数据
- 可用于文本分析和认知评估的结构化数据
- 支持计算语言学和机器学习分析的格式

## 临床应用价值
Writing Task广泛应用于：
- **语言能力评估**: 表达性语言障碍和语言发展迟缓评估
- **认知功能评估**: 执行功能、工作记忆和注意控制评估
- **神经心理评估**: 脑损伤后语言功能的评估和康复
- **心理健康评估**: 抑郁、焦虑等情绪状态的语言表达分析
- **教育评估**: 学生写作能力和学习困难的评估

## 注意事项
- 确保被试理解持续写作的要求，避免长时间停顿
- 提供清晰的写作提示，避免过于抽象或困难的话题
- 注意个体写作习惯和文化背景对表现的影响
- 考虑键盘输入熟练度对写作流畅性的影响