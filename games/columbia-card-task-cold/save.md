# Columbia Card Task Cold - Data Saving Documentation

## 概述
哥伦比亚卡片任务（冷认知版本）是一个评估风险决策和执行功能的认知测验。该任务要求参与者在32张卡片中选择翻开的数量，其中包含收益卡和损失卡，测量个体的风险承受能力和决策策略。

## 数据保存机制

### 保存端点
- **主要端点**: `POST /save`  
- **备用机制**: 本地CSV文件下载

### 数据保存流程
```javascript
$.ajax({
    type: "POST",
    url: '/save',
    data: { "data": data },
    success: function(){ document.location = "/next" },
    dataType: "application/json",
    
    error: function(err) {
        if (err.status == 200){
            document.location = "/next";
        } else {
            // 本地保存备份
            jsPsych.data.localSave('columbia-card-task-cold_results.csv', 'csv');
        }
    }
});
```

## 数据结构

### jsPsych数据框架
使用jsPsych心理学实验框架收集试次级别的详细数据，包括：

### 核心试次数据
- **trial_type**: 试次类型标识
- **trial_index**: 试次序号
- **rt**: 反应时间（毫秒）
- **key_press**: 按键记录
- **stimulus**: 刺激材料信息

### 卡片任务特有数据
```javascript
jsPsych.data.addDataToLastTrial({
    num_cards_chosen: currID,        // 选择的卡片数量
    num_loss_cards: numLossCards,    // 损失卡片数量
    gain_amount: gainAmt,            // 每张收益卡分值
    loss_amount: lossAmt,            // 损失卡扣分
    round_points: roundPointsArray,   // 回合得分
    whichRound: whichRound           // 回合编号
});
```

### 任务参数记录
- **收益结构**: 每张收益卡的分值设定
- **损失结构**: 损失卡的惩罚分值
- **风险水平**: 损失卡数量/总卡片数量比例
- **决策时间**: 从呈现到选择的反应时间
- **停止策略**: 参与者何时选择停止翻牌

## 认知测量维度

### 风险决策评估
- **风险偏好**: 个体对不确定性的态度
- **损失规避**: 对潜在损失的敏感度
- **期望值计算**: 数学期望的直觉理解
- **概率估计**: 对风险概率的主观判断

### 执行功能评估  
- **认知控制**: 抑制冲动反应的能力
- **决策灵活性**: 根据反馈调整策略的能力
- **工作记忆**: 维持任务规则和当前状态的能力
- **目标导向行为**: 为长期目标做出最优决策

### 冷认知 vs 热认知
- **冷认知特点**: 无即时反馈，纯认知推理
- **情绪调节**: 控制焦虑和恐惧情绪的影响
- **理性思维**: 基于逻辑分析而非情感冲动

## 实验设计特点

### 卡片配置
- **总卡片数**: 32张卡片
- **卡片布局**: 4×8网格排列
- **视觉呈现**: 统一的背面图像，翻开后显示收益/损失

### 风险操作
- **损失卡数量**: 1-3张不等（可变风险水平）
- **收益分值**: 通常10分/张
- **损失分值**: 通常-250到-750分
- **期望值**: 正期望值设计，鼓励适度风险承担

### 试次结构
- **多回合设计**: 通常24-32个回合
- **参数变化**: 损失卡数量和分值在回合间变化
- **累积得分**: 跨回合累计总分

## 临床应用价值

### 适用人群
- **神经心理评估**: 前额叶功能评估
- **风险行为研究**: 病理性赌博、物质依赖
- **决策能力评估**: 企业管理、投资决策能力
- **认知康复**: 执行功能训练

### 临床意义
- **冲动控制障碍**: 评估自我控制和延迟满足能力
- **焦虑障碍**: 识别过度谨慎和风险规避模式
- **抑郁症**: 评估决策动机和行为激活水平
- **注意缺陷**: 评估持续注意和认知灵活性

## 数据分析策略

### 基础指标
- **平均选择卡片数**: 反映整体风险偏好
- **最优选择比例**: 期望值最大化行为
- **决策时间**: 决策复杂度和认知负荷
- **一致性指标**: 跨回合决策的稳定性

### 进阶分析
- **风险调节能力**: 根据风险水平调整行为的能力
- **学习效应**: 跨回合的策略改进
- **损失敏感性**: 对不同损失水平的差异化反应
- **认知策略**: 最大化、满意化或启发式策略识别

### 计算模型
- **期望值模型**: EV = (32-损失卡数) × 收益 - 损失卡数 × 损失/32
- **风险调整收益**: 考虑个体风险偏好的效用函数
- **概率权重**: 主观概率与客观概率的偏差

## 技术实现细节

### jsPsych插件使用
- **jspsych-single-stim-button**: 主要任务界面
- **jspsych-poldrack-text**: 指导语呈现  
- **jspsych-poldrack-instructions**: 分步骤指导

### 视觉反馈系统
- **实时分数更新**: 每次选择后立即显示得分变化
- **卡片状态显示**: 区分未选择、收益卡、损失卡的视觉状态
- **进度指示**: 当前回合和总回合数显示

### 性能监控
```javascript
function assessPerformance() {
    var missed_count = 0;
    var rt_array = [];
    // 计算遗漏试次和平均反应时
    var credit_var = (missed_percent < 0.4 && avg_rt > 200);
}
```

## 注意事项

### 施测标准化
- **环境控制**: 安静环境，减少外界干扰
- **指导语标准**: 确保参与者理解任务规则
- **练习试次**: 正式测试前进行充分练习
- **时间控制**: 建议每个回合有适当思考时间限制

### 数据质量控制
- **反应时过滤**: 排除过快(<200ms)或过慢(>30s)的反应
- **一致性检查**: 识别明显的随机反应模式
- **动机评估**: 检查是否存在消极参与或应付了事
- **技术故障**: 记录并处理可能的界面或程序问题

### 结果解释注意
- **文化差异**: 考虑不同文化背景对风险的态度差异
- **年龄效应**: 年龄相关的认知能力变化
- **教育水平**: 数学能力对期望值计算的影响
- **临床状态**: 精神健康状况对决策能力的影响