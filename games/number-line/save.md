# Save Data Documentation - Number-Line

## 数据输出格式

### 基本信息
- **框架**: Phaser.js游戏引擎
- **输出格式**: JSON文件
- **文件名**: `number-line_result.json`
- **保存机制**: 本地下载 + 服务器POST

## 保存流程

1. **服务器保存**: 优先尝试POST到 `/save` 端点
2. **本地保存**: 服务器不可用时，自动下载JSON文件到本地

```javascript
// 保存代码片段
$.ajax({
    type: "POST",
    url: '/save',
    data: { "data": data },
    success: function(){ document.location = "/next" },
    error: function(err) {
        // fallback: 本地保存
        var a = document.createElement('a');
        a.download = 'number-line_result.json';
        a.href = 'data:' + data;
        a.click()
    }
});
```

## 数据结构

### 核心字段说明

| 字段名 | 类型 | 描述 |
|--------|------|------|
| `trial` | number | 当前试验编号 (从1开始) |
| `answer` | number | 玩家在数轴上的响应位置 |
| `problem` | string | 数学问题字符串，如 "5 + 3 = ?" |
| `RT` | number | 反应时间(秒) |
| `n1` | number | 第一个加数 |
| `n2` | number | 第二个加数 |
| `problem_id` | number | 问题标识符 |
| `solution` | number | 正确答案 |
| `ACC` | number | 准确性 (1=正确, 0=错误) |
| `points` | number | 当前累计金币数 |
| `finished` | number | 是否完成游戏 (1=完成, 0=未完成) |

### 游戏机制字段

| 字段名 | 类型 | 描述 |
|--------|------|------|
| `streak` | number | 连续正确次数 |
| `reps` | number | 当前题目重复尝试次数 |
| `task` | string | 任务类型："VS_production" |
| `problem_set` | string | 问题集合标识符 |

## 示例数据

### JSON格式示例

```json
[
  {
    "trial": 1,
    "answer": 8,
    "problem": "5 + 3 = ?",
    "RT": 2.456,
    "n1": 5,
    "n2": 3,
    "problem_id": 1,
    "solution": 8,
    "ACC": 1,
    "points": 1,
    "finished": 0
  },
  {
    "trial": 2,
    "answer": 12,
    "problem": "7 + 4 = ?",
    "RT": 1.823,
    "n1": 7,
    "n2": 4,
    "problem_id": 2,
    "solution": 11,
    "ACC": 0,
    "points": 0,
    "finished": 0
  }
]
```

## 认知指标评估

### 数学认知能力
- **基础运算**: 单数位和双数位加法运算能力
- **数轴理解**: 空间-数字映射关系
- **估算精度**: 数轴位置估算的准确性

### 空间数字处理
- **空间表征**: 将数字映射到空间位置的能力
- **精细运动控制**: 在数轴上精确定位的技能
- **视觉-运动协调**: 拖拽操作的准确性

### 表现评估标准
- **反应时分析**: RT < 10秒表示合理响应
- **准确率**: ACC值统计错误和正确比例
- **学习效应**: 连续试验中RT和ACC的变化

## 游戏机制

### 数轴设计
- **范围**: 0-30的数轴刻度
- **刻度间距**: 28.3像素单位间距
- **视觉反馈**: 实时标记位置和数值显示

### 题目生成
- **难度递增**: 从简单单数位到复杂双数位加法
- **自适应**: 根据表现调整题目难度
- **问题集合**: 预设问题库，按集合分类

### 反馈系统
- **即时反馈**: 正确/错误的视觉和分数反馈
- **金币奖励**: 正确答案获得金币，错误扣除金币
- **连击奖励**: 连续3, 7, 12次正确获额外奖励

## 数据收集特点

### 试验设计
- **重复机制**: 错误答案最多重试3次
- **渐进提示**: 3次错误后显示正确答案
- **完整记录**: 每次尝试都记录数据

### 时间测量
- **精确计时**: 毫秒级反应时记录
- **开始时机**: 从题目显示到提交答案的时间
- **排除无效**: 过快或过慢响应的识别

## 临床/研究应用

### 数学学习障碍评估
- **计算能力**: 基础运算技能缺陷
- **数感发展**: 数字大小和空间关系理解
- **工作记忆**: 保持和操作数字信息的能力

### 认知训练价值
- **数学概念**: 通过视觉化增强数字理解
- **空间技能**: 提高空间-数字转换能力
- **注意控制**: 训练持续注意和精确操作

### 发展评估
- **年龄相关**: 不同年龄组的表现基准
- **个体差异**: 空间和数字能力的个人模式
- **干预效果**: 训练前后的能力变化测量

## 注意事项

1. **数据完整性**: 确保每个试验都有完整的RT和准确性记录
2. **触屏适配**: 支持触屏设备的拖拽操作
3. **视觉清晰**: 确保数轴刻度和标记在各设备上清晰可见
4. **错误处理**: 妥善处理边界情况和异常输入
5. **练习效应**: 考虑熟悉度对后续试验的影响
6. **注意力维持**: 游戏化设计保持参与者兴趣和专注度