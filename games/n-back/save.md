# N-Back 任务数据保存说明

## 游戏概述
N-Back任务是一个经典的工作记忆测试，要求被试判断当前呈现的字母是否与N步之前呈现的字母相同。

## 数据保存机制

### 框架
- **使用框架**: jsPsych 实验心理学框架
- **数据收集**: 通过 `jsPsych.data.addDataToLastTrial()` 方法自动记录试验数据

### 保存的数据字段

#### 基础信息
- `trial_id`: 试验类型标识符
  - "instruction": 指导说明阶段
  - "stim": 刺激呈现阶段  
  - "attention_check": 注意力检查
  - "end": 结束阶段
  
- `exp_id`: 实验标识符 (固定值: "n_back")
- `exp_stage`: 实验阶段
  - "practice": 练习阶段
  - "test": 正式测试阶段

#### 试验数据
- `stim`: 当前呈现的字母刺激
- `target`: 目标字母（N步之前的字母）
- `load`: N-back的N值（1、2、3或0用于对照）
- `correct`: 反应正确性（true/false）
- `trial_num`: 试验序号
- `key_press`: 按键反应（37=左箭头键，40=下箭头键）
- `rt`: 反应时间（毫秒）

#### 特殊数据
- 对照条件(0-back)：target固定为字母't'，要求被试在看到't'时按左箭头键

### 数据记录流程

1. **指导说明阶段**: 记录阅读时间，确保被试充分理解任务
2. **练习阶段**: 1-back条件，提供正确/错误反馈
3. **测试阶段**: 
   - 随机顺序的1-back、2-back、3-back条件
   - 每个条件包含2个区块，每区块50个试验
   - 0-back对照条件
4. **后测问卷**: 收集被试对任务的理解和评价

### 数据分析指标

#### 准确率计算
```javascript
// 在record_acc函数中计算
if (stim == target && key == 37) {
    correct = true;  // 匹配且按左箭头键
} else if (stim != target && key == 40) {
    correct = true;  // 不匹配且按下箭头键
} else {
    correct = false; // 错误反应
}
```

#### 关键认知指标
- **工作记忆容量**: 不同N值条件下的准确率表现
- **反应时间**: 正确反应的平均反应时间
- **d'值**: 信号检测理论指标，区分能力
- **反应偏向**: β值，反应倾向性分析

### 数据导出格式
jsPsych自动将数据保存为JSON格式，包含每个试验的完整信息，可通过 `jsPsych.data.get()` 方法获取。

## 认知功能评估
该任务主要评估：
- 工作记忆更新能力
- 注意控制
- 认知灵活性
- 执行功能

## 注意事项
- 反应键设置：左箭头键(37)=匹配，下箭头键(40)=不匹配
- 字母忽略大小写：'t'与'T'视为相同
- 包含注意力检查机制确保数据质量