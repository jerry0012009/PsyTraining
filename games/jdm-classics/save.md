# JDM 经典实验 - 数据保存说明

## 游戏概述
JDM (Judgment and Decision Making) 经典实验是一个包含6个经典心理学问题的判断与决策测试，用于评估参与者的认知偏差和决策模式。

## 数据保存机制

### 1. 数据收集方式
- **全局对象**: 使用 `RESULTS` 对象存储所有答题数据
- **实时保存**: 每完成一题后立即保存到 `RESULTS` 对象
- **版本控制**: 随机分配版本A或B，测试不同的问题变体

### 2. 数据结构
```javascript
RESULTS = {
    version: 'A' | 'B',        // 实验版本
    q1: {...},                 // 问题1：琳达问题/比尔问题 - 合取谬误测试
    q2: {...},                 // 问题2：概率预测 - 赌徒谬误测试  
    q3: {...},                 // 问题3：疫苗决策/兽医决策 - 风险偏好测试
    q4: {...},                 // 问题4：工程师/人文专业概率 - 基础比率忽略测试
    q5: {...},                 // 问题5：糖果碗/弹珠托盘选择 - 比例偏差测试
    q6: {...}                  // 问题6：药物实验/棒球数据 - 证实偏差测试
}
```

### 3. 保存流程

#### 生产环境 (`IS_PRODUCTION = true`)
1. **主要方式**: 通过AJAX POST请求发送到 `/save` 端点
2. **请求格式**: 
   ```javascript
   $.ajax({
       type: "POST",
       url: '/save',
       data: RESULTS,
       success: function() { document.location = "/next" },
       dataType: "application/json"
   })
   ```
3. **成功处理**: 跳转到 `/next` 页面
4. **失败备用**: 如果服务器端点不可用，将结果输出到控制台

#### 开发环境 (`IS_PRODUCTION = false`)
- **控制台输出**: 直接使用 `console.dir(RESULTS)` 输出完整数据结构

### 4. 数据验证
- **必填检查**: 每题都必须作答才能进入下一题
- **重复检查**: Q1排序题检查是否有重复排名
- **格式验证**: 确保所有数据格式正确

### 5. 触发时机
- **实验完成**: 用户完成所有6个问题后自动触发保存
- **函数调用**: `finish()` 函数中执行最终数据保存
- **位置**: main.js 第677-694行

## 认知测量维度
该实验主要测量以下认知偏差：
- **合取谬误** (Q1)
- **赌徒谬误** (Q2) 
- **风险感知** (Q3)
- **基础比率忽略** (Q4)
- **比例偏差** (Q5)
- **证实偏差** (Q6)

## 技术要求
- jQuery 3.3.1 (AJAX请求)
- Bootstrap 5.1.3 (UI框架)
- 现代浏览器支持 (ES6+)
- 服务器端点 `/save` (生产环境)

## 文件位置
- 主逻辑: `js/main.js`
- 常量定义: `js/constants.js`
- 配置信息: `config.json`